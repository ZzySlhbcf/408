# 6.1.1 总线的基本概念

## 总线的定义

> 是一组能为多个部件分时和共享的公共信息传送线路


分时和共享是总线的两个特点
+ 分时: 同一时刻只允许有一个部件向总线发送信息, 若系统中有多个部件, 则它们只能分时地向总线发送信息
+ 共享是指总线上可以挂接多个部件, 各个部件之间互相交换的信息都可通过这组线路分时共享, 多个部件可同时从总线上接收相同的信息

## 总线设备

总线上所连接的设备, 按其对总线有无控制功能可分为主设备和从设备两种
+ 主设备: 指发出总线请求且获得总线控制权的设备
+ 从设备: 指被主设备访问的设备, 它只能响应从主设备发来的各种总线命令

## 总线特性

总线特性是指**机械特性**(尺寸、形状)、**电气特性**(传输方向和有效的电平范围)、功能特性(每根传输线的功能)和**时间特性**(信号和时序的关系)

# 6.1.2 总线的分类

## 按功能层次分类

1. 片内总线: 芯片内部的总线, 用于CPU芯片内部各寄存器之间及寄存器与ALU的连接
2. 系统总线: 计算机系统内各功能部件(CPU、主存、I/O接口)之间相互连接的总线
   按系统总线传输信息内容的不同, 又可分为3类: **数据总线、地址总线和控制总线** ^6723eb
   + 数据总线用来在各部件之间传输数据、指令和中断类型号等, 它是**双向传输总线**
      **数据总线的位数反映一次能传送的数据的位数**
   + 地址总线用来指出数据总线上源数据或目的数据所在的主存单元或I/O端口的地址, 它是**单向传输总线**
      **地址总线的位数反映最大的寻址空间**
   + 控制总线用来传输各种命令、反馈和定时信号, 典型的控制信号包括时钟、复位、总线请求/允许、中断请求/回答、存储器读/写、I/O读、I/O写、传输确认
>[!attention] 数据通路和数据总线
>各个功能部件通过数据总线连接形成的数据传输路径称为数据通路
>数据通路表示的是数据流经的**路径**, 而数据总线是数据传输的**媒介**

6. I/O总线: 主要用于连接中低速的I/O设备
   **通过I/O接口与系统总线相连接, 目的是将低速设备与高速总线分离, 以提升总线的系统性能**, 常见的有USB、PCI总线
7. 通信总线: 计算机系统之间或计算机系统与其他系统(如远程通信设备、测试设备)之间传送信息的总线
   通信总线也称外部总线

## 按时序控制方式分类

1. 同步总线: 总线上连接的部件或设备通过统一的时钟进行同步, 在规定的时钟节拍内进行规定的总线操作, 来完成部件或设备之间的信息传输
2. 异步总线: 总线上连接的部件或设备没有统一的时钟, 而以信号握手的方式来协调各部件或设备之间的信息传输, 总线操作时序不是固定的
## 按数据传输方式分类

1. 串行总线: 只有一条双向传输或两条单向传输的数据线, 数据按比特位串行顺序传输
   其效率低于并行总线, 串行传输对数据线的要求不太高, 因此**适合长距离通信**
2. 并行总线: 有多条双向传输的数据线, 可以实现多比特位的同时传输, 其效率比串行总线更高
   缺点是各条数据线的传输特点可能存在一些差异, 比如有的信息位可能延迟, 并且数据线之间相互干扰还会造成传输错误, 因此并行总线适合近距离通信

# 6.1.3 系统总线的结构

## 单总线结构

![[单总线结构.png]]

>[!attention] 单总线不是只有一根信号线, 而是按传送信息的的不同分为地址总线、数据总线和控制总线[[#^6723eb|系统总线]]

+ 结构简单, 成本低, 易于接入新的设备
+ 带宽低、负载重, 多个部件只能争用唯一的总线, 且不支持并发传送操作
## 双总线结构

![[双总线结构.png]]

主存总线: 在CPU、主存和哦通道之间传送数据
I/O总线: 多个外部设备与通道之间的传送数据

+ 将低速I/O设备从原单总线上分离出来, 实现存储器总线与I/O总线分离
+ 需要增加通道等硬件设备
## 三总线结构

![[三总线结构.png]]

主存总线+I/O总线+DMA总线(直接内存访问总线)

DMA用于内存和高速外设之间直接的数据传输

+ 提高了I/O设备的性能, 使其更快地响应命令, 提高系统吞吐量
+ 任意时刻只能使用一种总线, 系统工作效率较低
# 6.1.5 总线的性能指标

1. 总线时钟周期: 即机器的时钟周期
   计算机有一个统一的时钟, 以控制整个计算机的各个部件, 总线也要受此时钟的控制
2. 总线时钟频率: 即机器的时钟频率, 它为时钟周期的倒数
3. 总线传输周期(总线周期): 指一次总线操作所需的时间, 包括**申请阶段、寻址阶段、传输阶段和结束阶段**
   总线传输周期通常由若干总线时钟周期构成 ^e3bbdf
4. 总线工作频率: 总线上各种操作的频率, **为总线周期的倒数**
   实际上指1秒内传送几次数据, 若总线周期=N个时钟周期，则总线的工作频率=时钟频率/N
   若一个时钟周期可以传送K次数据, 则总线工作频率是总线时钟频率的K倍
5. 总线宽度: 总线宽度也称总线位宽，是总线上能够同时传输的数据位数，通常指数据总线的根数, 如32根称为32位总线
6. 总线带宽: 单位时间内总线上最多可传输数据的位数, 通常用每秒传送信息的字节数来衡量, 单位可用字节/秒(B/s)表示。
   >[!impoertant] 总线带宽=总线工作频率×(总线宽度/8)

7. 总线复用: 总线复用是指一种信号线在不同的时间传输不同的信息
8. 信号线数: 地址总线、数据总线和控制总线3种总线数的总和称为信号线数