# 3.3.1 连接原理

1. 主存通过**数据总线、地址总线和控制总线**与CPU连接
2. **数据总线的位数与工作频率的乘积正比于数据传输速率**
3. 地址总线的位数决定了**可寻址的最大内存空间**
4. 控制总线指出**总线周期的类型和本次输入输出操作完成的时刻**

![[主存于CPU的连接.png]]

# 3.3.2 主存容量的扩展

## 位扩展法

对字长进行扩展 (增加存储字长), **CPU的系统数据线数多于存储芯片的数据位数**

各芯片的地址线、片选控制线和读写控制线于系统总线相应并联
各芯片的数据线单独引出, 分别连接系统数据线

![[位扩展连接.png]]

## 字扩展法

对存储字的数量进行扩展. **系统数据线位数等于芯片数据线位数, 系统地址线位数多余芯片地址线位数**

各芯片的地址线与系统得直线的低位对应相连
芯片的数据线和读写控制线与系统总线并联
由系统地址线的高位译码得到各芯片的片选信号

![[字扩展连接.png]]

## 字位同时扩展法

即增加存储字的数量, 又增加存储字长

将进行位扩展的芯片作为一组, 各组的连接方式与位扩展的相同
由系统地址线高位译码产生若干片选信号, 分别接到各组芯片的片选控制线

![[字位同时扩展连接.png]]

# 3.3.3 存储芯片的地址分配和片选

要实现对存储单元的访问, 首先要选择存储芯片, 即进行片选
然后在选定的芯片中选择具体的存储单元, 以进行数据的读写, 即进行字选

芯片的字选通常是由CPU送出的N条低位地址线完成
片选信号的产生方式分为线选法和译码片选法

## 线选法

+ 不需要地址译码器, 线路简单
+ 地址空间不连续, 选片的地址线必须分时为低电平, 不能充分利用存储器空间, 造成地址资源的浪费

## 译码片选法

译码片选法用除片内寻址外的**高位地址线 (优先选择靠近低位的)**通过地址译码器产生片选信号

# 3.3.4 存储器与CPU的连接

1. 合理选择存储芯片

使用ROM存放系统程序、标准子程序和各类常数
RAM则是为用户编程设置的

2. 地址线的连接

CPU地址线的低位与存储芯片的地址线连接, 以选择芯片中的某一单元 (字选), 这部分译码是由芯片的片内逻辑完成的
CPU的地址线的高位则在扩充存储芯片时使用, 用来片选, 这部分译码由外接译码器逻辑完成

3. 数据线的连接

数据线数与存储芯片的数据线数不一定相等
在相等时可以直接连接, 在不相等时必须对存储芯片扩位

4. 读写控制线的连接

CPU的读写控制线可直接与存储芯片的读写控制端相联, 高电频为读, 低电平为写

5. 片选控制线的连接

哪一片被选中取决于该存储芯片的片选控制端$\overline{CS}$是否收到片选信号
片选信号与CPU的访存信号$\overline{MREQ}$ (低电平有效)有关
若CPU访问I/O, 则$\overline{MREQ}$为高, 表示不要求存储器工作